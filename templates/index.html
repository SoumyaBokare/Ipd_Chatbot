<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Ultra-Advanced Kiosk Chatbot</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v={{ timestamp }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="chat-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo">
                        <i class="fas fa-robot"></i>
                        <h1>Ultra-Advanced Kiosk</h1>
                    </div>
                    <div class="status-indicator">
                        <span class="status-dot" id="connectionStatus"></span>
                        <span id="statusText">Connecting...</span>
                        <span class="current-model-info">
                            Model: <span id="currentModelName">llama3.1:8b</span>
                        </span>
                    </div>
                    <!-- Hidden element for compatibility -->
                    <span id="currentModelDisplay" class="hidden">llama3.1:8b</span>
                </div>
                <div class="header-right">
                    <div class="model-selector">
                        <label for="modelSelect">
                            <i class="fas fa-brain"></i>
                            Model:
                        </label>
                        <select id="modelSelect" title="Switch AI Model">
                            <option value="llama3.1:8b">Llama 3.1 8B (Original)</option>
                            <option value="gemma:2b">Gemma 2B (Fast)</option>
                            <option value="phi3:mini">Phi3 Mini (Coding)</option>
                            <option value="llama3.2:1b">Llama 3.2 1B (Ultra-Fast)</option>
                            <option value="neural-chat">Neural Chat</option>
                        </select>
                    </div>
                    <div class="controls">
                        <button class="control-btn" id="statsBtn" title="View Statistics">
                            <i class="fas fa-chart-bar"></i>
                        </button>
                        <button class="control-btn" id="languageBtn" title="Change Language">
                            <i class="fas fa-language"></i>
                        </button>
                        <button class="control-btn" id="clearBtn" title="Clear Chat">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="control-btn" id="settingsBtn" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Features Banner - Hidden by default -->
        <div class="features-banner hidden" id="featuresBanner">
            <div class="features-content">
                <span class="features-title">Features: </span>
                <div class="features-list" id="featuresList"></div>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <div class="welcome-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h2>AI Assistant</h2>
                    <p>Ask me anything. I'm here to help with information, questions, and tasks.</p>
                    <div class="quick-commands">
                        <span class="command-label">Try:</span>
                        <button class="quick-cmd" onclick="sendQuickCommand('help')">Help</button>
                        <button class="quick-cmd" onclick="sendQuickCommand('what can you do?')">Capabilities</button>
                        <button class="quick-cmd" onclick="sendQuickCommand('hello')">Say Hello</button>
                    </div>
                </div>
            </div>

            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span>Assistant is typing...</span>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <button class="voice-btn" id="voiceBtn" title="Voice Input">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="model-btn" id="modelChangeBtn" title="Change AI Model" onclick="showModelModal()">
                        <i class="fas fa-robot"></i>
                    </button>
                    <input type="text" 
                           id="messageInput" 
                           placeholder="Ask me anything..."
                           maxlength="500"
                           autocomplete="off">
                    <button class="send-btn" id="sendBtn" title="Send Message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="input-info">
                    <span class="char-count">
                        <span id="charCount">0</span>/500
                    </span>
                    <span class="shortcuts">
                        Press Enter to send ‚Ä¢ Shift+Enter for new line
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Statistics Modal -->
    <div class="modal" id="statsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-chart-bar"></i> Session Statistics</h3>
                <button class="close-btn" onclick="closeModal('statsModal')" title="Close Statistics">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="stats-grid" id="statsGrid">
                    <!-- Stats will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Language Modal -->
    <div class="modal" id="languageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-language"></i> Select Language</h3>
                <button class="close-btn" onclick="closeModal('languageModal')" title="Close Language Selection">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="language-grid">
                    <button class="language-option" onclick="changeLanguage('en')">
                        <span class="flag">üá∫üá∏</span>
                        <span>English</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('es')">
                        <span class="flag">üá™üá∏</span>
                        <span>Espa√±ol</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('fr')">
                        <span class="flag">üá´üá∑</span>
                        <span>Fran√ßais</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('de')">
                        <span class="flag">üá©üá™</span>
                        <span>Deutsch</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('it')">
                        <span class="flag">üáÆüáπ</span>
                        <span>Italiano</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('pt')">
                        <span class="flag">üáµüáπ</span>
                        <span>Portugu√™s</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('ru')">
                        <span class="flag">üá∑üá∫</span>
                        <span>–†—É—Å—Å–∫–∏–π</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('zh')">
                        <span class="flag">üá®üá≥</span>
                        <span>‰∏≠Êñá</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('ja')">
                        <span class="flag">üáØüáµ</span>
                        <span>Êó•Êú¨Ë™û</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('ko')">
                        <span class="flag">üá∞üá∑</span>
                        <span>ÌïúÍµ≠Ïñ¥</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('ar')">
                        <span class="flag">üá∏üá¶</span>
                        <span>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                    </button>
                    <button class="language-option" onclick="changeLanguage('hi')">
                        <span class="flag">üáÆüá≥</span>
                        <span>‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Model Selection Modal -->
    <div class="modal" id="modelModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-robot"></i> Change AI Model</h3>
                <button class="close-btn" onclick="closeModal('modelModal')" title="Close Model Selection">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="model-grid" id="modelGrid">
                    <div class="loading-message">
                        <i class="fas fa-spinner fa-spin"></i>
                        Loading available models...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Settings</h3>
                <button class="close-btn" onclick="closeModal('settingsModal')" title="Close Settings">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Accessibility</h4>
                    <div class="setting-item">
                        <label class="switch" for="voiceOutput">
                            <input type="checkbox" id="voiceOutput" title="Enable Voice Output">
                            <span class="slider"></span>
                        </label>
                        <label for="voiceOutput">Enable Voice Output</label>
                    </div>
                    <div class="setting-item">
                        <label class="switch" for="highContrast">
                            <input type="checkbox" id="highContrast" title="High Contrast Mode">
                            <span class="slider"></span>
                        </label>
                        <label for="highContrast">High Contrast Mode</label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>Interface</h4>
                    <div class="setting-item">
                        <label class="switch" for="darkMode">
                            <input type="checkbox" id="darkMode" checked title="Dark Mode">
                            <span class="slider"></span>
                        </label>
                        <label for="darkMode">Dark Mode</label>
                    </div>
                    <div class="setting-item">
                        <label class="switch" for="animations">
                            <input type="checkbox" id="animations" checked title="Animations">
                            <span class="slider"></span>
                        </label>
                        <label for="animations">Animations</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}?v={{ timestamp }}"></script>
</body>
</html>